# Fugue: 核心探究基础设施设计文档 (Core Inquiry Infrastructure)

## 1. 产品动机 (Motivation)

人类的思考往往始于一次问答，随后在不断的分叉、回溯与跳跃中自然生长。这种混沌的轨迹才是探寻的常态，但现有的AI聊天界面却大多因袭了强制的线性结构。这种“被迫线性”不仅抹平了思维的分支路径，让用户在回看记录时容易丧失焦点，更让深度的局部追问变得异常累赘——你不得不反复描述过往的语境，进而导致大模型在冗余背景中产生上下文漂移（Context Drift）。

为此，在这个产品中，我们设计了一个“选中-追问（Selection-to-Question）”的交互逻辑。它基于一个务实的假设：**在一场连贯的探究中，每一步起跳的支点，一定潜伏在之前某个问答里。**

具体来说，每一轮问答都以“卡片”形式呈现，用户通过划选卡片内的锚点直接发起追问。由于“选中”动作本身即构成了 Prompt 的一部分，模型得以获得极其精准、干净的局部语境，从而有效规避上下文漂移。与此同时，划选动作也建立了卡片间的连接，让线性的对话自然生长为一张“思维全景图（Global Thought Map）”。在此视角下，无论是复盘逻辑还是回到任意节点开启二次探索，都变得直观且自然。

## 2. 核心形态：有约束的自由 (Structured Freedom)

Fugue 拒绝线性的漫谈，它通过一套“舒服的规范”，将混沌的好奇心引导至理性的轨道。

### 2.1 交互原语：选中即起跳 (Selection-to-Question)

**场景演示：星链引导的思维远征**
用户在画布中央敲下起点：“马斯克为什么要投这么多星链卫星？”
*   **第一声部**：Fugue 返回卡片 A。用户没有在底部输入框回复，而是直接在答案中划选了“要把天都堵住了”这段话。
*   **精准起跳**：划选动作自动触发了一个微型输入框。用户输入：“万一撞了，外太空会变成垃圾场吗？”
*   **细胞分裂**：一根优雅的贝塞尔曲线从卡片的“划选锚点”处伸出，在右前方生成了卡片 B（凯斯勒现象）。

**对比：为什么这种“约束”更高能？**
*   **指令聚焦 (Context Injection)**：在线性对话中，上下文是模糊的。而在 Fugue 中，每一次“起跳”都携带了极其精准的局部上下文。这迫使 AI 的回答从“通俗科普”进化为“针对性洞察”。
*   **空间记忆**：卡片拥有物理坐标。关于“安全”的分支向右生长，关于“哲学”的分支向下延伸。大脑的地理记忆被唤醒，你不再迷失于滚动条，而是统观一片思想的疆域。

### 2.2 复调画布 (The Polyphonic Canvas) —— 捕捉“追逐”
这是承载思维飞翔的舱室，它的灵魂在于**多声部并行**。
*   **同步探索**：用户可以同时从一张卡片的不同词汇上引出三条分枝。你会看到技术流、法律流、哲学流在屏幕上交替前进，互不干扰。你可以随时对比各声部的差异，这便是“复调”的魅力。

### 2.3 对位引擎 (The Counterpoint Engine) —— 计算“结构”
因为用户的每一次追问都挂载在特定的锚点上，结构在探索过程中已经天然形成。
*   **无感建模**：用户以为他只是在划词提问，但实际上他是在为这张知识网络绘制**逻辑地图**。
*   **实时熵减**：由于过程是有序的，引擎不再需要猜测节点关系。它能以极高的信噪比，将杂乱的探索流收敛为严密的逻辑晶格。

### 2.4 逻辑晶格 (The Logic Lattice) —— 交付“秩序”
结晶后的产物是一座精心构筑的建筑。
*   **思维地铁图**：混乱的气泡消失了，取而代之的是清晰的语义区块：技术区、法律区、哲学区被明显的逻辑桥接线串联。
*   **资产固化**：这些图谱可以一键导出为包含 Wikilinks 的文件夹。当你将它们拖入 Obsidian，一张完美的、本地化的知识网络便即时重现。这次思维的“赋格”，永久地成为了你认知资产的一部分。

---

## 3. 技术策略 (Technical Strategy)

Fugue 遵循 "Lightweight, Private, Intelligent" 的原则。

### 3.1 架构：Local-First PWA
* 前端形态: Progressive Web App。无须下载，即点即用，最大化降低探索门槛。
* 数据主权: 采用 Local-First 架构。
  * 用户的对话历史 (Trace) 和生成的图谱 (Crystal) 全部存储在浏览器 IndexedDB 中。
  * 隐私: 你的思想只属于你自己。不上传云端数据库，赋予用户绝对的安全感来自由发问。

### 3.2 核心算法栈
* Trace Parsing: 利用 Long-Context LLM (如 Claude-3-Haiku / Gemini-1.5-Flash) 进行低延迟的后台解析。
* Graph Rendering: 使用 ReactFlow 或 D3.js 实现高性能的图谱渲染与交互。

---

## 4. 产品哲学 (Philosophy)

结构涌现自无限追问（Structure emerges from recursive why）

知识是全连接的网络，The Recursive Why (无限追问) 是我们自由抵达其中任意角落的完备途径，也是最契合人类认知天性的探索方式。然而，自由伴随着混乱。我们需要将发散的探究轨迹收敛，让 The Emerging Structure (涌现结构) 自然显现。

**Fugue：好奇的追逐，思维的结晶。Fugue: The Chase of Curiosity, The Crystal of Logic.**

> 源于音乐与拉丁语的双重隐喻：
> 1. **The Chase (追逐/飞翔)**: 词源 *fuga* 意为 Flight/Chase。在赋格曲中，声部间不断的追逐象征着思维在好奇心驱动下的飞翔。
> 2. **The Structure (结构/对位)**: 赋格通过严密的对位法，让流动的旋律构建出宏大的建筑。这象征着从自由的探索中，天然涌现出严谨的逻辑晶体。