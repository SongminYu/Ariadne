# 产品文档

## 1. 产品动机

人类的思考往往始于一次问答，随后在不断的分叉、回溯与跳跃中自然生长。这种混沌的轨迹才是探寻的常态，但现有的AI聊天界面却大多因袭了强制的线性结构。这种“被迫线性”不仅抹平了思维的分支路径，让用户在回看记录时容易丧失焦点，更让深度的局部追问变得异常累赘——你不得不反复描述过往的语境，进而导致大模型在冗余背景中产生上下文漂移（Context Drift）。

为此，在这个产品中，我们设计了一个“选中-追问（Selection-to-Question）”的交互逻辑。它基于一个务实的假设：在一场连贯的探究中，每一步起跳的支点，一定潜伏在之前某个问答里。

具体来说，每一轮问答都以“卡片”形式呈现，用户通过划选卡片内的锚点直接发起追问。由于“选中”动作本身即构成了 Prompt 的一部分，模型得以获得极其精准、干净的局部语境，从而有效规避上下文漂移。与此同时，划选动作也建立了卡片间的连接，让线性的对话自然生长为一张“思维全景图（Global Thought Map）”。在此视角下，无论是复盘逻辑还是回到任意节点开启二次探索，都变得直观且自然。

### 其他

- 思维导图大多时候用来总结，脑袋里已经有相当的内容，用它展示出来。其实它也可以是自己生长出来的。
- 下载功能
- 整个网站ui
- 能不能用github pages部署
- feedback email

## 2. 产品设计

### 2.1 产品形态：去“卡片化”的思维星图 (The De-cardified Star Map)

我们不再拘泥于传统的“矩形卡片堆叠”。产品形态更接近于**生物神经网**或**深空星图**。
*   **节点 (Nodes)**：每一个问答不再是一个封闭的盒子，而是一个**“发光的思维斑块”**。在不同视角下，它是光点，是标题，也是一篇完整的文章。
*   **连接 (Tendrils)**：连线不再是工具性的直线，而是**有机的触须**。它们默认是隐没的，只有在思维流淌（Hover/Focus）时才被点亮。
*   **无重力画布**：思维没有上下左右。画布提供无限的平移与缩放，用户是在“漫游”，而非“浏览”。

### 2.2 核心交互：选中即生长 (Select-to-Grow)

1.  **播种 (The Seed)**：
    *   **极简入口**：首页是一片深邃的空无（或洁白的纸面）。输入框悬浮在中央。
    *   **根节点生成**：输入第一个问题，首个节点在中心“点亮”。

2.  **触碰与追问 (Touch & Ask)**：
    *   **微观选中**：用户在节点文本上划选。选中的文字周围泛起细腻的**光晕 (Halo)**。
    *   **分叉生长**：输入追问后，一条**发光的触须 (Luminous Tendril)** 从选中处缓慢生长出来，延伸到空白处，凝结成一个新的子节点。这一过程带有完美的物理阻尼感。
    *   **语境锚定**：选中动作自动锁定局部语境，确保 AI 的回答是针对“这一点”的精确变奏。

3.  **智能诱导 (Smart Nudge)**：
    *   **知识差注入**：AI 会在回答中故意埋入 1-2 个引发好奇的高级概念。
    *   **弱视觉暗示**：系统识别出的关键概念下方会有**极淡的下划线**。鼠标悬停时，浮现“我想了解更多关于...”的追问建议。

### 2.3 视觉隐喻：仿生光与精致信纸 (Biomimetic Light & Paper)

为了平衡“灵气”与“清晰度”，我们采用双重视觉策略。

#### 模式 A (首选)：Biomimetic Light (深色模式)
*   **世界观**：深海或宇宙。背景是深邃的午夜蓝/碳灰。
*   **节点形态**：**发光的磨砂玻璃**。没有实线边框，依靠微弱的内发光 (Inner Glow) 和边缘高光界定范围。
*   **文字**：悬浮在玻璃之上的纯白光子。阅读体验由于高对比度而极其清晰。
*   **连接**：像神经元突触一样的发光纤维。

#### 模式 B：Sophisticated Paper (浅色模式)
*   **世界观**：书房桌面。背景是带有极其微弱颗粒感的暖白纸纹。
*   **节点形态**：**微悬浮的便签**。去边框，使用多层柔和阴影 (Layered Shadow) 营造物理悬浮感。
*   **连接**：像墨水渗透纸张一样的深灰笔迹。

### 2.4 LOD 动态层级 (Level of Detail Dynamics)

这是解决“全景太乱，近看太局限”的核心机制。系统根据缩放级别 (Zoom Level) 动态渲染不同密度的信息。

*   **Level 1: 星空视图 (Starlight View)** [极远]
    *   **形态**：节点退化为**发光的圆点**。连线变细但依然可见。
    *   **交互**：鼠标悬停在圆点上，显示**标题 Tooltip**。点击圆点，飞入该节点。
    *   **目的**：概览宏观结构（是树，是网，还是单链？）。

*   **Level 2: 脉络视图 (Structure View)** [中距离]
    *   **形态**：节点显示为**大号标题**或**一句话摘要**。正文被隐藏。
    *   **交互**：清晰展示逻辑链路。适合快速扫视（Skimming）思维路径。

*   **Level 3: 阅读视图 (Reading View)** [近距离]
    *   **形态**：完整渲染节点内的所有文字、代码块和图片。
    *   **交互**：进行划选、复制、追问等深度操作。

*   **全局能力：详情面板 (Detail Panel)**
    *   **无论在哪个层级**，单击节点的主体，均可唤起一个覆盖在画布右侧的**Side Sheet（抽屉式面板）**。
    *   **功能**：在面板中沉浸式阅读该节点的完整长文，支持内部滚动。这样既不破坏画布的布局，又能承载从 Wikipedia 级别的长内容。

### 2.5 预设主题库 (Theme Gallery)

为了满足不同心境的思考需求，我们规划了以下这几种核心视觉风格。它们不仅仅是换色，而是物理材质的重构。

#### A. Biomimetic Light (仿生光) [Default Dark]
*   **关键词**：深海、神经元、生物发光
*   **视觉特征**：
    *   **背景**：深邃的午夜蓝，带有极其微弱的液体流动感。
    *   **节点**：磨砂玻璃质感，边缘有呼吸光晕。
    *   **连线**：发光的生物纤维，有能量流动动画。

#### B. Sophisticated Paper (精致信纸) [Default Light]
*   **关键词**：书房、Notecard、墨水
*   **视觉特征**：
    *   **背景**：暖白色的高级卡纸纹理。
    *   **节点**：微悬浮的卡片，带有真实的多层柔和阴影。
    *   **连线**：像墨水渗透纸张一样的深灰笔迹。

#### C. Zen Garden (枯山水)
*   **关键词**：静谧、沙盘、石子
*   **视觉特征**：
    *   **背景**：带有沙砾感的粗糙纹理。
    *   **节点**：实体的鹅卵石或石板质感，有着厚重的投影。
    *   **连线**：**凹槽 (Raked Sand)**。连线不是画在上面的，而是像耙子在沙盘上耙出的痕迹，有深度感。

#### D. Retro Terminal (复古终端)
*   **关键词**：极客、CRT、扫描线
*   **视觉特征**：
    *   **背景**：纯黑，带有 CRT 扫描线和轻微的屏幕曲率畸变。
    *   **节点**：ASCII 字符边框，单色荧光绿或琥珀色字体。
    *   **连线**：像素化的折线。

#### E. Constellation (星图仪)
*   **关键词**：理性、航海图、精密仪器
*   **视觉特征**：
    *   **背景**：深蓝色的工程蓝图，带有经纬网格。
    *   **节点**：全景下是实心圆点（恒星），展开后是极细线条的方框。带有十字准星等装饰。
    *   **连线**：几何完美的直线或圆弧，虚实结合。

### 2.6 关键功能架构 (Key Feature Architecture)

#### A. 账户策略：无缝升级 (Seamless Upgrade)
*   **混合登录态**：
    *   **游客模式**：默认状态。数据全量保存在 LocalStorage/IndexedDB。
    *   **一键升级**：右上角始终提供 "Sign in with Google/GitHub" 按钮。用户可随时点击登录，系统通过 OAuth 2.0 快速完成认证，并**自动将本地游客数据合并 (Auto-merge)** 到新账户的云端数据库。
    *   **核心理念**：注册不是一道必须要跨的门槛，而是一个随时可开启的“云同步服务”。
*   **信任与可见性 (Trust & Visibility)**：
    *   **极简状态**：界面仅显示统一的 `Saved` (已保存) 字样，**不**直接展示 "Local" 或 "Cloud" 等技术术语，降低认知噪音。
    *   **图标隐喻**：
        *   **本地态**：`Saved` + **空心云朵/虚线图标**。
        *   **云端态**：`Saved` + **实心云朵/实线图标**。
    *   **揭示真相 (Reveal on Hover)**：仅在用户鼠标悬停于图标时，才展示 Tooltip 解释当前存储媒介（“保存在本地浏览器” vs “已同步至云端”），并提供 **[下载备份]** 或 **[升级账户]** 的选项。

#### B. 探索与回溯 (Exploration & Review)
*   **鸟瞰视图 (Bird's Eye View)**：
    *   按住 Space 键或使用双指捏合手势，视口平滑拉远，进入**全景地图模式**。
    *   在此模式下，所有卡片缩小为**紧凑的缩略卡片**（显示标题或首句摘要），连线交织成网络。
*   **卡片交互 (Card Interaction)**：
    *   **点击展开**：在全景模式下，用户点击任意一张缩略卡片，该卡片会**原地平滑展开**为完整尺寸，显示完整的问答内容。
    *   **锚点可视化**：展开后，卡片内所有曾被“选中追问”的文本片段（Anchor Points）会被**高亮标记**。
    *   **分支预览与跳转**：从锚点引出的连线旁会显示**追问摘要**。点击连线，画布**平滑飞行**至子卡片并自动展开。
    *   **点击收起**：点击卡片外空白区域，卡片收缩回缩略状态，回归全景视野。
*   **路径高亮 (Path Tracing)**：
    *   在纷繁复杂的网络中，点击任意一张末端卡片（Leaf Node），系统会自动**点亮**从 Root 到这张卡片所经过的唯一路径，其余分支自动压暗。帮助用户在迷宫中瞬间理清“我是怎么一步步推导到这儿的”。

#### C. 结晶与导出 (Crystallization & Export)
这是针对深度思考者的杀手级交付。思维过程不能只停留在网页上，必须能沉淀为本地知识库。

*   **一键 Obsidian 园丁模式**：
    *   将整个画布导出为结构化的 `.zip` 包。
    *   **原子化文件**：每一个“卡片”变为一个独立的 `.md` 文件。
    *   **双向链接织网**：利用 Markdown 的 `[[WikiLinks]]` 语法还原网页上的连接。选中追问的文本会被转化为引用块 `> Quote`，并紧跟链接指向子文件。
    *   **无缝迁移**：用户解压后直接拖入 Obsidian，原本的网页画布结构瞬间无缝转化为 Obsidian 的 Graph View，不仅保留了内容，更保留了**思维的关系**。

*   **线性化报告 (Linearization)**：
    *   系统智能识别并提取用户标记为“精华”的几条路径，将其逻辑平铺，自动拼接成一篇逻辑通顺的长文章（Article），供用户复制分享到博客或邮件。

#### D. 国际化支持 (Internationalization / i18n)
*   **多语言架构**：
    *   界面左上角或设置菜单提供语言切换器。
    *   **默认语言**：英文 (English)。
    *   **支持语言**：中文 (简体/繁体)、日文、德语等。
*   **本地化细节**：
    *   所有 UI 文本（按钮、提示语、系统消息）均通过 i18n 资源文件管理（无硬编码）。
    *   **内容自适应**：系统提示语（Prompt）会根据当前界面语言自动调整，例如切到中文时，生成的追问引导也会是中文。

## 3. 备选名字

### 1. Tendril (卷须 / 蔓)
**核心意象：触感、攀爬与有机连接**

"Tendril" 是植物学中最为敏感的部位，指葡萄藤或爬山虎那纤细、呈螺旋状的触手。它在空气中试探，一旦触碰到支撑物（Selection），就会迅速缠绕（Anchor），并借力将本体拉向高处（Growth）。

*   **极致的敏感度（Sensitivity）**：Tendril 对触碰的反应极度灵敏，完美折射了产品中“选中”动作的微观颗粒度——用户无需引用整段冗文，只需轻轻划选一个词或半个句群，即刻引发系统的响应。
*   **无支点，不生长（Climbing via Support）**：藤蔓无法在真空中独自站立，它必须找到实体依附。这隐喻了本产品的核心假设：“每一步起跳的支点，一定潜伏在之前某个问答里”。之前的回答是墙面，划选动作是 Tendril 的缠绕（抓牢精准语境，规避漂移），而新的追问则是借力攀升出的新高度。
*   **螺旋向上（Spiral Growth）**：Tendril 的形态是优雅的螺旋，暗示思维的路径并非直线，而是回旋、试探、有机交织的生态系统。

### 2. Ramify (衍 / 分叉)
**核心意象：结构、分形与无限生成**

"Ramify" 描述了一个从主干不断细分出枝条、血管或神经的过程。它强调的是“一生二，二生三，三生万物”的几何美感与结构力量。

*   **分形的奥义（Fractal Nature）**：每一次“选中追问”，实际上都是进入了文本的微观世界。这个微观世界展开后，其结构的复杂度与宏观世界是一致的。Ramify 捕捉了这种“一沙一世界”的特性——我们在无限向思维的深处“放大”细节，而每一个细节都能展开成一个新的宇宙。
*   **思维的物理形态（Geometry of Thought）**：不同于线性的聊天记录，Ramify 暗示产品的最终交付物不是一条线，而是一个庞大、错综复杂的网络结构。它不仅是动词（分叉），更是名词（生成的结果），直观地描绘了那张“思维全景图（Global Thought Map）”。

### 3. Fugue (赋格)
**核心意象：复调、变奏与声部追逐**

"Fugue" 是巴赫音乐中精密而优雅的曲式，其特点是“追逐”——一个音乐动机（Subject）被引入，随后在不同的声部中被模仿、变形、对位。

*   **思维的复调（Polyphony of Mind）**：人类的思考不是单声道的独白，而是多声部的交响。在 Fugue 的视角下，每一次“选中”都是在引入一个新的“声部”（Voice），让对话从单调的问答变得丰满立体。
*   **动机与变奏（Theme & Variation）**：用户选中的那段文字就是“动机”。AI 的回答不是简单的回复，而是对这一动机的“变奏”与发展。这种在不同语境下对同一主题的反复追问与重构，恰如赋格曲中那种精密咬合、层层推进的智慧美感。它赋予了“重复追问”以一种艺术性的仪式感。
